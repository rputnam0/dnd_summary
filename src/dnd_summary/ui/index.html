<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DND Chronicle</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="page">
      <header class="site-header">
        <div class="brand">
          <div class="sigil"></div>
          <div>
            <p class="eyebrow">Chronicle Desk</p>
            <h1>DND Chronicle</h1>
            <p class="subtitle">Session memory, campaign lore, and story beats in one place.</p>
          </div>
        </div>
        <div class="controls">
          <div class="control-group">
            <label for="campaignSelect">Campaign</label>
            <select id="campaignSelect"></select>
          </div>
          <div class="control-group user-group">
            <label for="userIdInput">User</label>
            <div class="user-row">
              <input id="userIdInput" type="text" placeholder="User id (optional)" />
              <button id="userSetButton" type="button">Use</button>
            </div>
            <p id="userRole" class="meta"></p>
          </div>
          <div class="control-group search-group">
            <label for="searchInput">Search</label>
            <div class="search-row">
              <input
                id="searchInput"
                type="search"
                placeholder="Search Baba Yaga, magic shop, lost relics..."
              />
              <button id="searchButton" type="button">Seek</button>
            </div>
            <label class="toggle">
              <input id="semanticToggle" type="checkbox" checked />
              <span>Semantic Search</span>
            </label>
            <label class="toggle">
              <input id="sessionOnlyToggle" type="checkbox" />
              <span>Current session only</span>
            </label>
          </div>
        </div>
      </header>

      <div class="layout">
        <aside class="sidebar">
          <div class="sidebar-header">
            <h2>Sessions</h2>
            <span id="sessionCount" class="count-pill">0</span>
          </div>
          <div id="sessionList" class="session-list"></div>
        </aside>

        <main class="content">
          <div id="statusLine" class="status">Select a session to begin.</div>

          <section id="summarySection" class="panel">
            <div class="panel-header">
              <h2>Session Summary</h2>
              <div class="meta-row">
                <div id="sessionMeta" class="meta"></div>
                <div class="run-select">
                  <label for="runSelect">Run</label>
                  <select id="runSelect"></select>
                </div>
                <button id="downloadSummary" class="button" type="button">
                  Download Summary
                </button>
              </div>
            </div>
            <div id="runMetrics" class="metrics"></div>
            <div id="summaryText" class="summary-text"></div>
            <div id="qualityMetrics" class="quality-metrics"></div>
            <div id="runDiagnostics" class="diagnostics"></div>
            <div id="artifactLinks" class="artifact-links"></div>
          </section>

          <section id="questSection" class="panel">
            <div class="panel-header">
              <h2>Quest Journal</h2>
              <span class="badge">Campaign</span>
            </div>
            <div class="entity-controls">
              <label for="questFilter">Status</label>
              <select id="questFilter">
                <option value="all">All</option>
                <option value="active">Active</option>
                <option value="proposed">Proposed</option>
                <option value="completed">Completed</option>
                <option value="blocked">Blocked</option>
                <option value="failed">Failed</option>
                <option value="abandoned">Abandoned</option>
              </select>
            </div>
            <div id="questList" class="thread-grid"></div>
          </section>

          <section id="codexSection" class="panel">
            <div class="panel-header">
              <h2>Campaign Codex</h2>
              <span class="badge">All Entities</span>
            </div>
            <div class="entity-controls">
              <label for="codexSearch">Search</label>
              <input id="codexSearch" type="search" placeholder="Search the codex..." />
              <label for="codexFilter">Type</label>
              <select id="codexFilter">
                <option value="all">All</option>
                <option value="character">Characters</option>
                <option value="location">Locations</option>
                <option value="item">Items</option>
                <option value="faction">Factions</option>
                <option value="monster">Monsters</option>
                <option value="organization">Organizations</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div id="codexList" class="entity-grid"></div>
          </section>

          <section id="timelineSection" class="panel">
            <div class="panel-header">
              <h2>Chronicle Timeline</h2>
              <span class="badge">Flow</span>
            </div>
            <div id="timelineList" class="timeline-list"></div>
          </section>

          <section id="threadSection" class="panel">
            <div class="panel-header">
              <h2>Threads & Quests</h2>
              <span class="badge">Active Lore</span>
            </div>
            <div id="threadList" class="thread-grid"></div>
          </section>

          <section id="sceneSection" class="panel">
            <div class="panel-header">
              <h2>Scenes</h2>
              <span class="badge">Timeline</span>
            </div>
            <div id="sceneList" class="scene-list"></div>
          </section>

          <section id="eventSection" class="panel">
            <div class="panel-header">
              <h2>Events</h2>
              <span class="badge">Key Moves</span>
            </div>
            <div id="eventList" class="event-list"></div>
          </section>

          <section id="quoteSection" class="panel">
            <div class="panel-header">
              <h2>Quotes</h2>
              <span class="badge">Voices</span>
            </div>
            <div id="quoteList" class="quote-grid"></div>
          </section>

          <section id="transcriptSection" class="panel">
            <div class="panel-header">
              <h2>Transcript</h2>
              <span class="badge">Full</span>
            </div>
            <div id="transcriptText" class="transcript-text"></div>
          </section>

          <section id="entitySection" class="panel">
            <div class="panel-header">
              <h2>Entities</h2>
              <span class="badge">Cast & Places</span>
            </div>
            <div class="entity-controls">
              <label for="entityFilter">Filter</label>
              <select id="entityFilter">
                <option value="all">All</option>
                <option value="character">Characters</option>
                <option value="location">Locations</option>
                <option value="item">Items</option>
                <option value="faction">Factions</option>
                <option value="monster">Monsters</option>
                <option value="organization">Organizations</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div id="entityList" class="entity-grid"></div>
          </section>
        </main>
      </div>
    </div>

    <div id="searchPanel" class="search-panel hidden">
      <div class="search-card">
        <div class="search-header">
          <div>
            <p class="eyebrow">Search Results</p>
            <h3 id="searchTitle">Results</h3>
            <p id="searchSub" class="meta"></p>
          </div>
          <button id="closeSearch" type="button">Close</button>
        </div>
        <div id="searchResults" class="search-results"></div>
      </div>
    </div>

    <div id="entityPanel" class="search-panel hidden">
      <div class="search-card">
        <div class="search-header">
          <div>
            <p class="eyebrow">Entity Dossier</p>
            <h3 id="entityTitle">Entity</h3>
            <p id="entityMeta" class="meta"></p>
          </div>
          <button id="closeEntity" type="button">Close</button>
        </div>
        <div id="entityDetails" class="search-results"></div>
      </div>
    </div>

    <div id="threadPanel" class="search-panel hidden">
      <div class="search-card">
        <div class="search-header">
          <div>
            <p class="eyebrow">Quest Editor</p>
            <h3 id="threadTitle">Quest</h3>
            <p id="threadMeta" class="meta"></p>
          </div>
          <button id="closeThread" type="button">Close</button>
        </div>
        <div id="threadDetails" class="search-results"></div>
      </div>
    </div>

    <div id="evidencePanel" class="search-panel hidden">
      <div class="search-card">
        <div class="search-header">
          <div>
            <p class="eyebrow">Evidence</p>
            <h3 id="evidenceTitle">Evidence</h3>
            <p id="evidenceMeta" class="meta"></p>
          </div>
          <button id="closeEvidence" type="button">Close</button>
        </div>
        <div id="evidenceDetails" class="search-results"></div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
